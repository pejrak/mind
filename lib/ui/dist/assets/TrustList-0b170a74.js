import{b as i,m as u,a as o,n as a}from"./index-8a97ae8a.js";import{B as c}from"./Main-2297809f.js";const p=n=>typeof n=="string"&&n.length>4,d=n=>[...new Set(n)];var l=function(){var t=this,e=t._self._c;return e("b-row",[e("b-col",{staticClass:"text-center"},[e("h3",[t._v("Trusts")]),t._l(t.trustsOnPath,function(r){return t.trustsOnPath.length>0?e("span",{key:`trust-${r.recipient}`},[e("b-dropdown",{staticClass:"mr-1",attrs:{variant:r.isConnected?"success":"secondary",split:""},on:{click:function(s){return t.onSync(r)}},scopedSlots:t._u([{key:"button-content",fn:function(){return[e("b-icon-arrow-repeat"),e("span",[t._v(" "+t._s(r.recipient))])]},proxy:!0}],null,!0)},[e("b-dropdown-item",{on:{click:function(s){return t.onRemoveTrust(r)}}},[e("span",{staticClass:"text-danger"},[t._v("Remove trust")])])],1)],1):e("div",{staticClass:"small"},[t._v("No trusts on selected path.")])}),e("b-dropdown",{attrs:{text:"Add trust",variant:"primary"}},[t._l(t.candidates,function(r){return e("b-dropdown-item-button",{key:`trustee-candidate-${r}`,on:{click:function(s){return t.onAddTrust(r)}}},[t._v(t._s(r))])}),e("b-dropdown-form",{staticStyle:{"min-width":"300px"},on:{submit:function(r){return r.preventDefault(),t.onAddTrust.apply(null,arguments)}}},[e("b-input-group",{attrs:{size:"sm"}},[e("b-input",{attrs:{placeholder:"Email of trustee"},model:{value:t.newTrustRecipientInput,callback:function(r){t.newTrustRecipientInput=r},expression:"newTrustRecipientInput"}}),e("b-input-group-addon",[e("Button",{attrs:{disabled:!t.recipientIsValid,variant:"primary",size:"sm"},on:{click:t.onAddTrust}},[t._v("Add trust")])],1)],1)],1)],2),e("hr")],2)],1)},m=[];const h={components:{Button:c},computed:{...i("authentication",["userEmail"]),...i("trusts",["outgoing"]),...u("trusts",["outgoingOn"]),candidates(){return d(this.outgoing.filter((n,t,e)=>!this.trustsOnPath.find(r=>r.recipient===n.recipient)).map(n=>n.recipient))},recipientIsValid(){return p(this.newTrustRecipientInput)&&this.newTrustRecipientInput!==this.userEmail},trustsOnPath(){return this.outgoingOn(this.fragmentPath)}},data(){return{newTrustRecipientInput:""}},methods:{...o("trusts",["addTrust","removeTrust"]),...o("peers",["syncConnection"]),async onAddTrust(n=this.newTrustRecipientInput){confirm(`Trust ${n}?`)&&(await this.addTrust({recipient:n,path:this.fragmentPath}),this.newTrustRecipientInput="")},onRemoveTrust(n){confirm(`Remove trust to ${n.recipient}?`)&&this.removeTrust(n)},onSync(n){this.syncConnection(n.recipient)}},watch:{outgoing(n){n.length>0}},props:{fragmentPath:{type:Array,required:!0}}};var f=a(h,l,m,!1,null,null,null,null);const g=f.exports;export{g as default};
